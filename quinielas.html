---
layout: default
---

<section id="quinielas">
	<div class="container">
		<div class="page-title py-4">
			<h1>Quinielas</h1>
		</div>

		<p>Quiniela prizes are grouped by upvote values: ≤$1, ≈$3, ≈$5, ≈$10, ≈$15, ≈$20</p>
		<p>You can play as many quinielas as you want.</p>
		
		<div class="loader text-center"><i class="fas fa-spinner fa-spin"></i></div>
		<template v-if="quinielas">
			<ul class="nav nav-tabs clean" role="tablist">
			  <li class="nav-item" v-for="(quiniela, index) in quinielas.items">
			  	<a  v-bind:class="{ active: index === 0 }" class="nav-link" 
			    		v-bind:id="'round' + index + '-tab'"
			    		data-toggle="tab" 
			    		v-bind:href="'#round' + index" 
			    		role="tab" 
			    		v-bind:aria-controls="'round' + index" 
			    		v-bind:aria-selected="{ true: index === 0 }"
			    		v-text="quiniela.name">			    			
			    </a>
			  </li>
			</ul>
			<div class="tab-content py-4 px-4">
			  <div v-for="(quiniela, index) in quinielas.items" 
			  		class="tab-pane fade" v-bind:class="{ active: index === 0, show: index === 0 }"
			  		v-bind:id="'round' + index"
			  		role="tabpanel" 
			  		v-bind:aria-labelledby="'round' + index + '-tab'">
			  	<div class="accordion" :id="'accordion' + index">
					  <div class="card">
					    <div class="card-header px-4 py-2 collapsed" data-toggle="collapse" :data-target="'#resume' + index" aria-expanded="false">
					      Accumulated prize
					    </div>

					    <div :id="'resume' + index" class="collapse" :data-parent="'#accordion' + index">
					      <div class="card-body">
					        <template v-if="Object.keys(quinielas.votes).length > 0" v-for="(item, _index) in quinielas.votes">
							  		<template v-if="quiniela.name === _index">
								  		<table class="table table-sm">
								  			<thead>
								  				<th scope="col">Ammount</th>
										      <th scope="col">Created</th>
										      <th scope="col">Jackpot</th>
								  			</thead>
								  			<tbody>
								  				<tr v-for="(array, $index) in item">
								  					<td scope="row">
								  						<span v-if="$index == 1">$1 and bellow</span>
															<span v-else v-text="'≈ $' + $index"></span>
								  					</td>
								  					<td v-text="getJackpot(array)[0]"></td>
								  					<td v-text="'≈ $' + getJackpot(array)[1].toFixed(4)"></td>
								  				</tr>
								  			</tbody>
								  		</table>
							  		</template>
							  	</template>
							  	<template v-else>
							  		<div class="py-4 px-4 text-center"><i class="fas fa-spinner fa-spin"></i></div>
							  	</template>
					      </div>
					    </div>
					  </div>
					  <div class="card">
					    <div class="card-header px-4 py-2" data-toggle="collapse" :data-target="'#play' + index" aria-expanded="true">
					      Play this quiniela <span class="float-right font-xs mt-2" v-text="convertDate(quiniela.closes, 'closing')"></span>
					    </div>
					    <div :id="'play' + index" class="collapse show" :data-parent="'#accordion' + index">
					      <div class="card-body">
					        <table class="table quiniela">
									  <tbody>
									    <tr v-for="match in quiniela.matches">
									      <td><img width="30" :src="getFlag(Object.keys(match)[0])"> <span v-text="Object.keys(match)[0]"></span></td>
									      <td align="center"><input type="text" v-model="match[Object.keys(match)[0]]"></td>
									      <td align="center" class="px-0">Vs.<br><span class="font-xs">Starts on <span v-text="convertDate(match.starts, 'starts')"></span></span></td>
									      <td align="center"><input type="text" v-model="match[Object.keys(match)[1]]"></td>
									      <td align="right"><span v-text="Object.keys(match)[1]"></span> <img width="30" :src="getFlag(Object.keys(match)[1])"></td>
									    </tr>
									  </tbody>
									</table>
									<div v-if="steem.name">
										<div class="input-group mb-4">
										  <select class="custom-select" :disabled="!steem.voting" :ref="'voteValue' + index">
										    <option value="1" v-on:click="setAproxVoteVal(1)">≤ 1</option>
										    <template v-if="steem.voting">
										    <option value="3" v-if="steem.voting.sbd >= 3" v-on:click="setAproxVoteVal(1)">≈ 3</option>
										    <option value="5" v-if="steem.voting.sbd >= 5" v-on:click="setAproxVoteVal(1)">≈ 5</option>
										    <option value="10" v-if="steem.voting.sbd >= 10" v-on:click="setAproxVoteVal(1)">≈ 10</option>
										    <option value="15" v-if="steem.voting.sbd >= 15" v-on:click="setAproxVoteVal(1)">≈ 15</option>
										    <option value="20" v-if="steem.voting.sbd >= 20" v-on:click="setAproxVoteVal(1)">≈ 20</option>
										    </template>
										  </select>
										  <div class="input-group-append">
										    <button class="btn btn-primary" type="button" v-on:click="voteQuiniela(index)" :disabled="!steem.voting">
													<span v-if="steem.voting">Place vote</span>
													<span v-else><i class="fas fa-spinner fa-spin"></i></span>
										    </button>
										  </div>
										</div>
									</div>
									<div v-else>
										<button class="btn btn-outline-primary" onclick="document.documentElement.scrollTop = document.body.scrollTop = 0">
											Please login to place your bet.
										</button>
									</div>
					      </div>
					    </div>
					  </div>
					</div>
			  </div>
			</div>
		</template>

		<div id="voteQuiniela" class="modal" tabindex="-1" role="dialog" data-backdrop="static" data-keyboard="false">
		  <div class="modal-dialog modal-lg" role="document">
		    <div class="modal-content">
		      <div class="modal-header">
		        <h5 class="modal-title"></h5>
		        <button type="button" class="close d-none" data-dismiss="modal" aria-label="Close">
		          <span aria-hidden="true">&times;</span>
		        </button>
		      </div>
		      <div class="modal-body text-12 text-center">
		      	<div class="wait d-none">
		      		<p>Please wait, your bet is being registered in the blockchain.</p>
		      		<p><i class="fas fa-spinner fa-spin"></i></p>
		      	</div>
		      	<div class="success d-none">
		      		<h5>Good luck <span v-text="steem.name"></span></h5>
		      		<p>Your quiniela has been registered</p>
		      		<p>Would you like to share the following post on your blog timeline so your friends can join you and increase the jackpot?</p>
		      		<hr>
		      		<div class="share-post">
		      			<b class="title" id="" ref="postTitle">I just registered a quiniela for the Russia 2018 World Cup on betsteem.</b>
								<div class="content" ref="postContent">
									<br>
									<center>You can join me at <a href="https://betsteem.com/quinielas">betsteem.com</a> to start betting using your voting power.</center>
									<br>
									<div>These are my selections:</div>
									<br>
									<center>
										<table ref="qTable"><thead><tr><th>Team</th><th>Score</th><th></th><th>Score</th><th class="text-right">Team</th></tr></thead><tbody ref="tBody">
										</tbody></table>
									</center>
								</div>
		      		</div>
		      		<br>
		      		<div class="btn-group" role="group">
		      			<button type="button" class="btn btn-danger" data-dismiss="modal">No thanks</button>
		      			<button type="button" class="btn btn-primary" v-on:click="postQuiniela">Yes, please!</button></div>
		      	</div>
		      	<div class="publish-post d-none">
		      		<div class="publihing">
			      		<p>Great!! just one more second, your post is being published.</p>
			      		<p><i class="fas fa-spinner fa-spin"></i></p>
		      		</div>
		      		<div class="published d-none">
			      		<p>Great!! your post has been published.</p>
			      		<p>you can now close this window.</i></p>
		      		</div>
		      	</div>
		      </div>
		    </div>
		  </div>
		</div>
	</div>
</section>